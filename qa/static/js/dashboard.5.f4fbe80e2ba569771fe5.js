(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1219:function(e,t,n){"use strict";n.r(t),function(e){var r,a=n(2),s=n(1),i=n(97),o=n(1220),c=n(1135),l=n.n(c),p=n(1107),u=n.n(p),m=(n(1105),n(382),n(1101),n(1103),n(1108)),d=n.n(m),h=(n(1106),n(1109),n(1223)),g=n(3);(r=n(12).enterModule)&&r(e);var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={canRefreshResolve:1,listLen:0,hasMore:0,initializing:1,refreshedAt:Date.now()},t.menu=function(e){return s.createElement(u.a,{onClick:t.clickMenu.bind(t,e)},s.createElement(u.a.Item,{key:"0",className:h.textCenter},"顶置该会话"),s.createElement(u.a.Item,{key:"1",className:h.textCenter},"从会话列表移除"))},t.menu1=function(e){return s.createElement(u.a,{onClick:t.clickMenu.bind(t,e)},s.createElement(u.a.Item,{key:"2",className:h.textCenter},"取消顶置"),s.createElement(u.a.Item,{key:"1",className:h.textCenter},"从会话列表移除"))},t.clickMenu=function(e,n){var r=t.props,a=r.deleteConvList,s=r.setNotification,i=JSON.parse(localStorage.getItem("userInfo"));switch(n.key){case"0":s({conversationType:e.conversationType,userId:i.id,targetId:e.targetId,type:2,isOpen:1});break;case"1":a(e.conversationType,e.targetId);break;case"2":s({conversationType:e.conversationType,userId:i.id,targetId:e.targetId,type:2,isOpen:0})}},t.loadMore=function(e){setTimeout(function(){var n=t.state.listLen+9;t.setState({listLen:n,hasMore:n>0&&n<50}),e()},2e3)},t.submit=function(e){e.preventDefault()},t.gotoChat=function(e){var n=t.props.routerStore.history;(0,t.props.setChatType)(e),localStorage.setItem("chatType",JSON.stringify(e)),n.push("/Message/"+e.targetId)},t.refresh=function(e,n){setTimeout(function(){t.state.canRefreshResolve?(t.props.GetConversationsList(),t.setState({listLen:9,hasMore:1,refreshedAt:Date.now()}),e()):n()},2e3)},t}return a.d(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.setState({listLen:9,hasMore:1,initializing:2})},2e3)},t.prototype.componentWillMount=function(){this.props.resetConversationsList,this.props.routerStore.history},t.prototype.render=function(){var e=this,t=this.state,n=(t.listLen,t.hasMore),r=t.initializing,a=(t.refreshedAt,t.canRefreshResolve,this.props),i=a.ConversationsList,c=a.TopConversationsList;a.GetConversationsList;return s.createElement("div",{style:{overflowX:"hidden",height:"calc( "+innerHeight+"px - 16vw )",overflowY:"scroll"}},s.createElement("div",{style:{height:"16vw"}}),s.createElement(l.a,{onRefresh:this.refresh,hasMore:n,onLoadMore:this.loadMore,initializing:r,className:h.tloaderBox},s.createElement("div",{className:h.whiteBg},s.createElement("div",{className:h.isTop},Object(g.toJS)(c).sort(function(e,t){return t.sentTime-e.sentTime}).map(function(t,n){return s.createElement("div",{key:n},s.createElement(d.a,{overlay:e.menu1(t),trigger:["contextMenu"],placement:"topLeft"},s.createElement("div",{onClick:e.gotoChat.bind(e,t)},s.createElement(o.a,{user:t}))))})),Object(g.toJS)(i).sort(function(e,t){return t.sentTime-e.sentTime}).map(function(t,n){return s.createElement("div",{key:n},s.createElement(d.a,{overlay:e.menu(t),trigger:["contextMenu"],placement:"topLeft"},s.createElement("div",{onClick:e.gotoChat.bind(e,t)},s.createElement(o.a,{user:t}))))}))))},t=a.c([Object(i.b)(function(e){var t=e.routerStore,n=e.rongStore,r=e.userStore,a=n.ConversationsList,s=n.deleteConvList,i=n.setChatType,o=n.resetConversationsList,c=n.initEnd,l=n.GetConversationsList,p=n.innerHeight,u=n.TopConversationsList;return{routerStore:t,ConversationsList:a,setChatType:i,resetConversationsList:o,GetConversationsList:l,deleteConvList:s,setNotification:r.setNotification,TopConversationsList:u,innerHeight:p,initEnd:c}}),i.c],t)}(s.Component);const f=v;var C,x;t.default=f,C=n(12).default,x=n(12).leaveModule,C&&(C.register(v,"Chat","C:/project/react/test/ts-react-webpack/src/containers/views/Chat/index.tsx"),C.register(f,"default","C:/project/react/test/ts-react-webpack/src/containers/views/Chat/index.tsx"),x(e))}.call(this,n(34)(e))},1220:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return C});var r,a=n(1),s=n(227),i=n.n(s),o=n(228),c=n.n(o),l=n(1102),p=n.n(l),u=(n(1101),n(1115)),m=n.n(u),d=(n(1114),n(1221));function h(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/<p(([\s\S])*?)>/g,"").replace(/<p(([\s\S])*?)>/g,"").replace(/(\n)/g,"").replace(/(\t)/g,"").replace(/(\r)/g,"").replace(/<\/?[^>]*>/g,"").replace(/(^\s*)|(\s*$)/g,"")}function g(e){return{__html:e}}function v(e){return a.createElement("div",{className:d.text,dangerouslySetInnerHTML:g(e)})}function f(e){switch(e.content.messageName){case"TextMessage":return a.createElement(c.a,{className:d.text,primary:e.nickname?e.nickname:"",secondary:h(e.content.content)});case"InformationNotificationMessage":return a.createElement(c.a,{className:d.text,primary:e.nickname?e.nickname:"",secondary:h(e.content.message)});case"FileMessage":return a.createElement(c.a,{className:d.text,primary:e.nickname?e.nickname:"",secondary:"文件消息"});case"ImageMessage":return a.createElement(c.a,{className:d.text,primary:e.nickname?e.nickname:"",secondary:"图片消息"})}}function C(e){e.style;var t=e.user;return a.createElement("div",{className:d.messageBox},a.createElement(i.a,{button:!0,className:d.messageBox},a.createElement(m.a,{count:t.unreadMessageCount},a.createElement(p.a,{src:t.portraitUri,className:d.avatar,shape:"square",size:48,icon:"user"})),a.createElement("div",{className:d.posiBox},f(t))))}(r=n(12).enterModule)&&r(e);const x=C;var y,k;y=n(12).default,k=n(12).leaveModule,y&&(y.register(h,"__unescape","C:/project/react/test/ts-react-webpack/src/containers/shared/UnitChat/index.tsx"),y.register(g,"createMarkup","C:/project/react/test/ts-react-webpack/src/containers/shared/UnitChat/index.tsx"),y.register(v,"dangerousHtml","C:/project/react/test/ts-react-webpack/src/containers/shared/UnitChat/index.tsx"),y.register(f,"switchContent","C:/project/react/test/ts-react-webpack/src/containers/shared/UnitChat/index.tsx"),y.register(C,"UnitChat","C:/project/react/test/ts-react-webpack/src/containers/shared/UnitChat/index.tsx"),y.register(x,"default","C:/project/react/test/ts-react-webpack/src/containers/shared/UnitChat/index.tsx"),k(e))}).call(this,n(34)(e))},1221:function(e,t,n){e.exports={text:"_2jOhHlPJA_670aSplIGW12",avatar:"_1mq_B807nMILRocW_m73hp","posi-box":"_1Z0Jb7yFiM4RKhtimuqlfE",posiBox:"_1Z0Jb7yFiM4RKhtimuqlfE",numberCount:"_3wWEbTMjC1AQuT_GaFcgea"}},1223:function(e,t,n){e.exports={"tloader-box":"_2dT6YnBHGIfR_1_47pU6B0",tloaderBox:"_2dT6YnBHGIfR_1_47pU6B0","white-bg":"_2jomQ35t1QDBgaKdvPJhB4",whiteBg:"_2jomQ35t1QDBgaKdvPJhB4","text-center":"_3Q5jXmvxK56OqUBMFRUAj9",textCenter:"_3Q5jXmvxK56OqUBMFRUAj9","is-top":"_1aCpto_6AVVsW9_BbKH-GD",isTop:"_1aCpto_6AVVsW9_BbKH-GD"}}}]);